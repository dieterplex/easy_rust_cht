<!DOCTYPE HTML>
<html lang="zh-TW" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title> ç‰¹å¾µ - Easy Rust</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="Chapter_0.html"><strong aria-hidden="true">1.</strong>  æ›´æ–°</a></li><li class="chapter-item expanded "><a href="Chapter_1.html"><strong aria-hidden="true">2.</strong>  ä»‹ç´¹</a></li><li class="chapter-item expanded "><a href="Chapter_2.html"><strong aria-hidden="true">3.</strong>  æˆ‘æ˜¯èª°ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="Chapter_3.html"><strong aria-hidden="true">4.</strong>  ç°¡å–®è‹±èªå­¸ Rust</a></li><li class="chapter-item expanded "><a href="Chapter_4.html"><strong aria-hidden="true">5.</strong>  Rust Playground</a></li><li class="chapter-item expanded "><a href="Chapter_5.html"><strong aria-hidden="true">6.</strong>  ğŸš§ å’Œ âš ï¸</a></li><li class="chapter-item expanded "><a href="Chapter_6.html"><strong aria-hidden="true">7.</strong>  è¨»è§£</a></li><li class="chapter-item expanded "><a href="Chapter_7.html"><strong aria-hidden="true">8.</strong>  å‹åˆ¥</a></li><li class="chapter-item expanded "><a href="Chapter_8.html"><strong aria-hidden="true">9.</strong>  å‹åˆ¥æ¨å°</a></li><li class="chapter-item expanded "><a href="Chapter_9.html"><strong aria-hidden="true">10.</strong>  åˆ—å° hello, world!</a></li><li class="chapter-item expanded "><a href="Chapter_10.html"><strong aria-hidden="true">11.</strong>  é¡¯ç¤ºå’Œé™¤éŒ¯</a></li><li class="chapter-item expanded "><a href="Chapter_11.html"><strong aria-hidden="true">12.</strong>  å¯è®Šæ€§</a></li><li class="chapter-item expanded "><a href="Chapter_12.html"><strong aria-hidden="true">13.</strong>  å †ç–Šã€å †ç©å’ŒæŒ‡æ¨™</a></li><li class="chapter-item expanded "><a href="Chapter_13.html"><strong aria-hidden="true">14.</strong>  æ›´å¤šé—œæ–¼åˆ—å°</a></li><li class="chapter-item expanded "><a href="Chapter_14.html"><strong aria-hidden="true">15.</strong>  å­—ä¸²</a></li><li class="chapter-item expanded "><a href="Chapter_15.html"><strong aria-hidden="true">16.</strong>  const å’Œ static</a></li><li class="chapter-item expanded "><a href="Chapter_16.html"><strong aria-hidden="true">17.</strong>  æ›´å¤šé—œæ–¼åƒè€ƒ</a></li><li class="chapter-item expanded "><a href="Chapter_17.html"><strong aria-hidden="true">18.</strong>  å¯è®Šåƒè€ƒ</a></li><li class="chapter-item expanded "><a href="Chapter_18.html"><strong aria-hidden="true">19.</strong>  å‚³éåƒè€ƒçµ¦å‡½å¼</a></li><li class="chapter-item expanded "><a href="Chapter_19.html"><strong aria-hidden="true">20.</strong>  è¤‡è£½å‹åˆ¥</a></li><li class="chapter-item expanded "><a href="Chapter_20.html"><strong aria-hidden="true">21.</strong>  é›†åˆå‹åˆ¥</a></li><li class="chapter-item expanded "><a href="Chapter_21.html"><strong aria-hidden="true">22.</strong>  å‘é‡</a></li><li class="chapter-item expanded "><a href="Chapter_22.html"><strong aria-hidden="true">23.</strong>  å…ƒçµ„</a></li><li class="chapter-item expanded "><a href="Chapter_23.html"><strong aria-hidden="true">24.</strong>  æ§åˆ¶æµç¨‹</a></li><li class="chapter-item expanded "><a href="Chapter_24.html"><strong aria-hidden="true">25.</strong>  çµæ§‹é«”</a></li><li class="chapter-item expanded "><a href="Chapter_25.html"><strong aria-hidden="true">26.</strong>  åˆ—èˆ‰</a></li><li class="chapter-item expanded "><a href="Chapter_26.html"><strong aria-hidden="true">27.</strong>  è¿´åœˆ</a></li><li class="chapter-item expanded "><a href="Chapter_27.html"><strong aria-hidden="true">28.</strong>  å¯¦ä½œçµæ§‹é«”å’Œåˆ—èˆ‰</a></li><li class="chapter-item expanded "><a href="Chapter_28.html"><strong aria-hidden="true">29.</strong>  è§£æ§‹</a></li><li class="chapter-item expanded "><a href="Chapter_29.html"><strong aria-hidden="true">30.</strong>  åƒè€ƒå’Œé»é‹ç®—å­</a></li><li class="chapter-item expanded "><a href="Chapter_30.html"><strong aria-hidden="true">31.</strong>  æ³›å‹</a></li><li class="chapter-item expanded "><a href="Chapter_31.html"><strong aria-hidden="true">32.</strong>  Option å’Œ Result</a></li><li class="chapter-item expanded "><a href="Chapter_32.html"><strong aria-hidden="true">33.</strong>  å…¶ä»–é›†åˆå‹åˆ¥</a></li><li class="chapter-item expanded "><a href="Chapter_33.html"><strong aria-hidden="true">34.</strong>  å•è™Ÿ(?)é‹ç®—å­</a></li><li class="chapter-item expanded "><a href="Chapter_34.html" class="active"><strong aria-hidden="true">35.</strong>  ç‰¹å¾µ</a></li><li class="chapter-item expanded "><a href="Chapter_35.html"><strong aria-hidden="true">36.</strong>  éˆçµæ–¹æ³•</a></li><li class="chapter-item expanded "><a href="Chapter_36.html"><strong aria-hidden="true">37.</strong>  ç–Šä»£å™¨</a></li><li class="chapter-item expanded "><a href="Chapter_37.html"><strong aria-hidden="true">38.</strong>  é–‰åŒ…</a></li><li class="chapter-item expanded "><a href="Chapter_38.html"><strong aria-hidden="true">39.</strong>  dbg! å·¨é›†å’Œ .inspect</a></li><li class="chapter-item expanded "><a href="Chapter_39.html"><strong aria-hidden="true">40.</strong>  &str çš„ç¨®é¡</a></li><li class="chapter-item expanded "><a href="Chapter_40.html"><strong aria-hidden="true">41.</strong>  ç”Ÿå‘½é€±æœŸ</a></li><li class="chapter-item expanded "><a href="Chapter_41.html"><strong aria-hidden="true">42.</strong>  å…§éƒ¨å¯è®Šæ€§</a></li><li class="chapter-item expanded "><a href="Chapter_42.html"><strong aria-hidden="true">43.</strong>  Cow</a></li><li class="chapter-item expanded "><a href="Chapter_43.html"><strong aria-hidden="true">44.</strong>  é¡å‹åˆ¥å</a></li><li class="chapter-item expanded "><a href="Chapter_44.html"><strong aria-hidden="true">45.</strong>  todo! å·¨é›†</a></li><li class="chapter-item expanded "><a href="Chapter_45.html"><strong aria-hidden="true">46.</strong>  Rc</a></li><li class="chapter-item expanded "><a href="Chapter_46.html"><strong aria-hidden="true">47.</strong>  å¤šåŸ·è¡Œç·’</a></li><li class="chapter-item expanded "><a href="Chapter_47.html"><strong aria-hidden="true">48.</strong>  å‡½å¼ä¸­çš„é–‰åŒ…</a></li><li class="chapter-item expanded "><a href="Chapter_48.html"><strong aria-hidden="true">49.</strong>  impl ç‰¹å¾µ</a></li><li class="chapter-item expanded "><a href="Chapter_49.html"><strong aria-hidden="true">50.</strong>  Arc</a></li><li class="chapter-item expanded "><a href="Chapter_50.html"><strong aria-hidden="true">51.</strong>  é€šé“</a></li><li class="chapter-item expanded "><a href="Chapter_51.html"><strong aria-hidden="true">52.</strong>  é–±è®€ Rust æ–‡ä»¶</a></li><li class="chapter-item expanded "><a href="Chapter_52.html"><strong aria-hidden="true">53.</strong>  å±¬æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_53.html"><strong aria-hidden="true">54.</strong>  Box</a></li><li class="chapter-item expanded "><a href="Chapter_54.html"><strong aria-hidden="true">55.</strong>  Box åŒ…è£¹çš„ç‰¹å¾µ</a></li><li class="chapter-item expanded "><a href="Chapter_55.html"><strong aria-hidden="true">56.</strong>  Default å’Œç”Ÿæˆå™¨æ¨¡å¼</a></li><li class="chapter-item expanded "><a href="Chapter_56.html"><strong aria-hidden="true">57.</strong>  Deref å’Œ DerefMut</a></li><li class="chapter-item expanded "><a href="Chapter_57.html"><strong aria-hidden="true">58.</strong>  Crates å’Œæ¨¡çµ„</a></li><li class="chapter-item expanded "><a href="Chapter_58.html"><strong aria-hidden="true">59.</strong>  æ¸¬è©¦</a></li><li class="chapter-item expanded "><a href="Chapter_59.html"><strong aria-hidden="true">60.</strong>  å¤–éƒ¨ crates</a></li><li class="chapter-item expanded "><a href="Chapter_60.html"><strong aria-hidden="true">61.</strong>  æ¨™æº–å‡½å¼åº«ä¹‹æ—…</a></li><li class="chapter-item expanded "><a href="Chapter_61.html"><strong aria-hidden="true">62.</strong>  æ’°å¯«å·¨é›†</a></li><li class="chapter-item expanded "><a href="Chapter_62.html"><strong aria-hidden="true">63.</strong>  cargo</a></li><li class="chapter-item expanded "><a href="Chapter_63.html"><strong aria-hidden="true">64.</strong>  æ¥å—ä½¿ç”¨è€…è¼¸å…¥</a></li><li class="chapter-item expanded "><a href="Chapter_64.html"><strong aria-hidden="true">65.</strong>  ä½¿ç”¨æª”æ¡ˆ</a></li><li class="chapter-item expanded "><a href="Chapter_65.html"><strong aria-hidden="true">66.</strong>  cargo doc å‘½ä»¤</a></li><li class="chapter-item expanded "><a href="Chapter_66.html"><strong aria-hidden="true">67.</strong>  çµæŸäº†å—ï¼Ÿ</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Easy Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/dieterplex/easy_rust_cht" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/dieterplex/easy_rust_cht/edit/main/README.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="ç‰¹å¾µ"><a class="header" href="#ç‰¹å¾µ">ç‰¹å¾µ</a></h2>
<p>æˆ‘å€‘ä»¥å‰è¦‹éç‰¹å¾µ(Trait)ï¼š<code>Debug</code>ã€<code>Copy</code>ã€<code>Clone</code> éƒ½æ˜¯ç‰¹å¾µã€‚è¦è³¦äºˆå‹åˆ¥ç‰¹å¾µï¼Œå°±å¿…é ˆå¯¦ä½œå®ƒã€‚å› ç‚º <code>Debug</code> å’Œå…¶ä»–çš„ç‰¹å¾µéƒ½å¾ˆå¸¸è¦‹ï¼Œæ‰€ä»¥æˆ‘å€‘æœ‰å¯ä»¥è‡ªå‹•å¯¦ä½œçš„å±¬æ€§(attribute)ã€‚é‚£å°±æ˜¯ç•¶ä½ å¯«ä¸‹ <code>#[derive(Debug)]</code> æ™‚æ‰€ç™¼ç”Ÿçš„äº‹æƒ…ï¼šä½ è‡ªå‹•å¯¦ä½œäº† <code>Debug</code>ã€‚</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct MyStruct {
    number: usize,
}

fn main() {}</code></pre></pre>
<p>ä½†æ˜¯å…¶ä»–çš„ç‰¹å¾µå°±æ¯”è¼ƒå›°é›£äº†ï¼Œæ‰€ä»¥éœ€è¦ç”¨ <code>impl</code> æ‰‹å‹•å¯¦ä½œã€‚ä¾‹å¦‚ï¼Œ<code>Add</code> (åœ¨ <code>std::ops::Add</code> æ‰¾åˆ°) æ˜¯ç”¨ä¾†ç´¯åŠ å…©å€‹æ±è¥¿çš„ã€‚ä½†æ˜¯ Rust ä¸¦ä¸çŸ¥é“ä½ åˆ°åº•è¦æ€éº¼ç´¯åŠ ï¼Œæ‰€ä»¥ä½ å¿…é ˆå‘Šè¨´å®ƒã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct ThingsToAdd {
    first_thing: u32,
    second_thing: f32,
}

fn main() {}</code></pre></pre>
<p>æˆ‘å€‘å¯ä»¥ç´¯åŠ  <code>first_thing</code> å’Œ <code>second_thing</code>ï¼Œä½†æˆ‘å€‘éœ€è¦æä¾›æ›´å¤šè³‡è¨Šã€‚ä¹Ÿè¨±æˆ‘å€‘æƒ³è¦ <code>f32</code>ï¼Œæ‰€ä»¥åƒé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
let result = self.second_thing + self.first_thing as f32
<span class="boring">}</span></code></pre></pre>
<p>ä½†ä¹Ÿè¨±æˆ‘å€‘æƒ³è¦æ•´æ•¸ï¼Œæ‰€ä»¥åƒé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
let result = self.second_thing as u32 + self.first_thing
<span class="boring">}</span></code></pre></pre>
<p>æˆ–è€…æˆ‘å€‘åªæ˜¯æƒ³æŠŠ <code>self.first_thing</code> æ”¾åœ¨ <code>self.second_thing</code> æ—é‚Šé€™æ¨£åŠ èµ·ä¾†ã€‚æ‰€ä»¥å¦‚æœæˆ‘å€‘æŠŠ 55 åŠ åˆ° 33.4ï¼Œæˆ‘å€‘æƒ³çœ‹åˆ°çš„æ˜¯ 5533.4ï¼Œè€Œä¸æ˜¯ 88.4ã€‚</p>
<p>æ‰€ä»¥é¦–å…ˆè®“æˆ‘å€‘çœ‹ä¸€ä¸‹å¦‚ä½•åšå‡ºç‰¹å¾µã€‚<code>trait</code> è¦è¨˜å¾—çš„é‡é»åœ¨æ–¼å®ƒå€‘çš„è¡Œç‚º (behaviour)ã€‚è¦å¯¦ä½œç‰¹å¾µæ™‚ï¼Œå¯«ä¸‹ <code>trait</code>ï¼Œç„¶å¾Œå»ºç«‹ä¸€äº›å‡½å¼ã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Animal { // ç°¡å–®çµæ§‹é«” - Animalåªæœ‰åå­—
    name: String,
}

trait Dog { // ç‹—çš„ç‰¹å¾µçµ¦å‡ºä¸€äº›åŠŸèƒ½æ€§
    fn bark(&amp;self) { // ç‰ æœƒå å«
        println!(&quot;Woof woof!&quot;);
    }
    fn run(&amp;self) { // ä¸¦ä¸”ç‰ æœƒè·‘
        println!(&quot;The dog is running!&quot;);
    }
}

impl Dog for Animal {} // ç¾åœ¨Animalæœ‰äº†ç‰¹å¾µDog

fn main() {
    let rover = Animal {
        name: &quot;Rover&quot;.to_string(),
    };

    rover.bark(); // Animalèƒ½ç”¨ bark()
    rover.run();  // ä¸¦ä¸”ç‰ èƒ½ç”¨ run()
}</code></pre></pre>
<p>é€™ç¯„ä¾‹æ²’å•é¡Œï¼Œä½†æ˜¯æˆ‘å€‘ä¸æƒ³å°å‡º &quot;The dog is running&quot;ã€‚å¦‚æœä½ æƒ³çš„è©±ï¼Œä½ å¯ä»¥æ›´æ”¹ <code>trait</code> çµ¦ä½ çš„æ–¹æ³•ï¼Œä½†ä½ å¿…é ˆæœ‰ç›¸åŒçš„ç°½åã€‚é€™æ„å‘³è‘—å®ƒéœ€è¦æ¥å—åŒæ¨£çš„æ±è¥¿ï¼Œä¸¦å›å‚³åŒæ¨£çš„æ±è¥¿ã€‚ä¾‹å¦‚ï¼Œæˆ‘å€‘å¯ä»¥æ”¹è®Š <code>.run()</code> æ–¹æ³•ï¼Œä½†æˆ‘å€‘å¿…é ˆéµå¾ªç°½åã€‚ç°½åæ˜¯ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
fn run(&amp;self) {
    println!(&quot;The dog is running!&quot;);
}
<span class="boring">}</span></code></pre></pre>
<p><code>fn run(&amp;self)</code> çš„æ„æ€æ˜¯ &quot;fn <code>run()</code> æ¥å— <code>&amp;self</code> å¼•æ•¸ï¼Œä¸”ä¸å›å‚³ä»»ä½•å…§å®¹&quot;ã€‚æ‰€ä»¥ä½ ä¸èƒ½é€™æ¨£åšï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn run(&amp;self) -&gt; i32 { // âš ï¸
    5
}
<span class="boring">}</span></code></pre></pre>
<p>Rust æœƒèªªï¼š</p>
<pre><code class="language-text">   = note: expected fn pointer `fn(&amp;Animal)`
              found fn pointer `fn(&amp;Animal) -&gt; i32`
</code></pre>
<p>ä½†æˆ‘å€‘å¯ä»¥åšé€™æ¨£åšï¼š</p>
<pre><pre class="playground"><code class="language-rust">struct Animal { // ç°¡å–®çµæ§‹é«” - Animalåªæœ‰åå­—
    name: String,
}

trait Dog { // ç‹—çš„ç‰¹å¾µçµ¦å‡ºä¸€äº›åŠŸèƒ½æ€§
    fn bark(&amp;self) { // ç‰ æœƒå å«
        println!(&quot;Woof woof!&quot;);
    }
    fn run(&amp;self) { // ä¸¦ä¸”ç‰ æœƒè·‘
        println!(&quot;The dog is running!&quot;);
    }
}

impl Dog for Animal {
    fn run(&amp;self) {
        println!(&quot;{} is running!&quot;, self.name);
    }
}

fn main() {
    let rover = Animal {
        name: &quot;Rover&quot;.to_string(),
    };

    rover.bark(); // Animalèƒ½ç”¨ bark()
    rover.run();  // ä¸¦ä¸”ç‰ èƒ½ç”¨ run()
}</code></pre></pre>
<p>ç¾åœ¨å°å‡ºäº† <code>Rover is running!</code>ã€‚é€™æ¨£å¯ä»¥æ˜¯å› ç‚ºæˆ‘å€‘å›å‚³çš„æ˜¯ <code>()</code>ï¼Œä¹Ÿå°±æ˜¯ä»€éº¼éƒ½æ²’æœ‰ï¼Œä¹Ÿæ˜¯ç‰¹å¾µç°½åæ‰€èªªçš„ã€‚</p>
<p>ç•¶ä½ åœ¨å¯«ç‰¹å¾µæ™‚ï¼Œä½ å¯ä»¥åªå¯«å‡½å¼ç°½åï¼Œä½†å¦‚æœä½ é€™æ¨£åšï¼Œä½¿ç”¨è€…å°‡å¿…é ˆå¯«å‡ºå‡½å¼çš„å¯¦ä½œå…§å®¹ã€‚è®“æˆ‘å€‘ä¾†è©¦è©¦ã€‚ç¾åœ¨æˆ‘å€‘æŠŠ <code>bark()</code> å’Œ <code>run()</code> æ”¹æˆåªæœ‰ <code>fn bark(&amp;self);</code> å’Œ <code>fn run(&amp;self);</code>ã€‚é€™ä¸æ˜¯å®Œæ•´çš„å‡½å¼ï¼Œæ‰€ä»¥å¿…é ˆç”±ä½¿ç”¨è€…ä¾†å¯«ã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Animal {
    name: String,
}

trait Dog {
    fn bark(&amp;self); // bark() èªªè¦æœ‰ &amp;self ä¸¦ä¸”ä¸å›å‚³
    fn run(&amp;self); // run() èªªè¦æœ‰ &amp;self ä¸¦ä¸”ä¸å›å‚³ã€‚
                   // é‚£éº¼ç¾åœ¨æˆ‘å€‘å¿…é ˆè¦è‡ªå·±å¯«å‡ºå®ƒå€‘ã€‚
}

impl Dog for Animal {
    fn bark(&amp;self) {
        println!(&quot;{}, stop barking!!&quot;, self.name);
    }
    fn run(&amp;self) {
        println!(&quot;{} is running!&quot;, self.name);
    }
}

fn main() {
    let rover = Animal {
        name: &quot;Rover&quot;.to_string(),
    };

    rover.bark();
    rover.run();
}</code></pre></pre>
<p>æ‰€ä»¥ç•¶ä½ å»ºç«‹ç‰¹å¾µæ™‚ï¼Œä½ å¿…é ˆæ€è€ƒï¼š&quot;æˆ‘æ‡‰è©²å¯«å“ªäº›å‡½å¼ï¼Ÿè€Œä½¿ç”¨è€…åˆæ‡‰è©²å¯«å“ªäº›å‡½å¼ï¼Ÿ&quot;å¦‚æœä½ èªç‚ºä½¿ç”¨è€…æ¯æ¬¡ä½¿ç”¨æŸå€‹å‡½å¼çš„æ–¹å¼æ‡‰è©²ä¸€è‡´ï¼Œé‚£éº¼å°±è©²æŠŠå®ƒå¯«å‡ºä¾†ã€‚å¦‚æœä½ èªç‚ºä½¿ç”¨è€…æœƒæœ‰ä¸åŒçš„ä½¿ç”¨æ–¹å¼ï¼Œé‚£å°±åªå¯«å‡ºå‡½å¼ç°½åå³å¯ã€‚</p>
<p>é‚£è®“æˆ‘å€‘å˜—è©¦ç‚ºæˆ‘å€‘çš„çµæ§‹é«”å¯¦ä½œ Display ç‰¹å¾µã€‚é¦–å…ˆæˆ‘å€‘å°‡åšå€‹ç°¡å–®çš„çµæ§‹é«”ï¼š</p>
<pre><pre class="playground"><code class="language-rust">struct Cat {
    name: String,
    age: u8,
}

fn main() {
    let mr_mantle = Cat {
        name: &quot;Reggie Mantle&quot;.to_string(),
        age: 4,
    };
}</code></pre></pre>
<p>ç¾åœ¨æˆ‘å€‘æƒ³è¦å°å‡º <code>mr_mantle</code>ã€‚Debug å¾ˆå®¹æ˜“æ¨å°å‡ºï¼š</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct Cat {
    name: String,
    age: u8,
}

fn main() {
    let mr_mantle = Cat {
        name: &quot;Reggie Mantle&quot;.to_string(),
        age: 4,
    };

    println!(&quot;Mr. Mantle is a {:?}&quot;, mr_mantle);
}</code></pre></pre>
<p>ä½† Debug åˆ—å°ä¸æ˜¯æœ€æ¼‚äº®çš„å°å‡ºæ–¹å¼ï¼Œå› ç‚ºå®ƒçœ‹èµ·ä¾†åƒé€™æ¨£ã€‚</p>
<pre><code class="language-text">Mr. Mantle is a Cat { name: &quot;Reggie Mantle&quot;, age: 4 }
</code></pre>
<p>å› æ­¤å¦‚æœæˆ‘å€‘æƒ³è¦å°å‡ºå¾—æ›´å¥½çœ‹ï¼Œå°±éœ€è¦ç‚º <code>Cat</code> å¯¦ä½œ <code>Display</code>ã€‚åœ¨ <a href="https://doc.rust-lang.org/std/fmt/trait.Display.html">https://doc.rust-lang.org/std/fmt/trait.Display.html</a> ä¸Šæˆ‘å€‘å¯ä»¥çœ‹åˆ° Display çš„è³‡è¨Šï¼Œé‚„æœ‰ä¸€å€‹ç¯„ä¾‹ã€‚å®ƒèªªï¼š</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt;

struct Position {
    longitude: f32,
    latitude: f32,
}

impl fmt::Display for Position {
    fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
        write!(f, &quot;({}, {})&quot;, self.longitude, self.latitude)
    }
}

fn main() {}</code></pre></pre>
<p>æœ‰äº›éƒ¨åˆ†æˆ‘å€‘é‚„ä¸æ˜ç™½ï¼Œæ¯”å¦‚ <code>&lt;'_&gt;</code> å’Œ <code>f</code> æ˜¯åšä»€éº¼çš„ã€‚ä½†æˆ‘å€‘çŸ¥é“ <code>Position</code> çµæ§‹é«”ï¼šå®ƒåªæ˜¯å…©å€‹ <code>f32</code>ã€‚æˆ‘å€‘ä¹Ÿæ‡‚ <code>self.longitude</code> å’Œ <code>self.latitude</code> æ˜¯çµæ§‹é«”ä¸­çš„æ¬„ä½ã€‚æ‰€ä»¥ï¼Œä¹Ÿè¨±æˆ‘å€‘å¯ä»¥æ‹¿é€™å€‹ç¨‹å¼ç¢¼ä¾†çµ¦æˆ‘å€‘çš„çµæ§‹é«”ç”¨åœ¨ <code>self.name</code>å’Œ<code>self.age</code> ä¸Šã€‚å¦å¤– <code>write!</code> çœ‹èµ·ä¾†å¾ˆåƒ <code>println!</code>ï¼Œæ‰€ä»¥æœƒæ„Ÿåˆ°å¾ˆç†Ÿæ‚‰ã€‚æ‰€ä»¥æˆ‘å€‘å¯«æˆé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt;

struct Cat {
    name: String,
    age: u8,
}

impl fmt::Display for Cat {
    fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
        write!(f, &quot;{} is a cat who is {} years old.&quot;, self.name, self.age)
    }
}

fn main() {}</code></pre></pre>
<p>è®“æˆ‘å€‘æ–°å¢ <code>fn main()</code>ã€‚ç¾åœ¨æˆ‘å€‘çš„ç¨‹å¼ç¢¼åƒé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt;

struct Cat {
    name: String,
    age: u8,
}

impl fmt::Display for Cat {
  fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
      write!(f, &quot;{} is a cat who is {} years old.&quot;, self.name, self.age)
  }
}

fn main() {
    let mr_mantle = Cat {
        name: &quot;Reggie Mantle&quot;.to_string(),
        age: 4,
    };

    println!(&quot;{}&quot;, mr_mantle);
}</code></pre></pre>
<p>æˆåŠŸäº†! ç¾åœ¨ç•¶æˆ‘å€‘ä½¿ç”¨ <code>{}</code> åˆ—å°æ™‚ï¼Œæˆ‘å€‘å¾—åˆ° <code>Reggie Mantle is a cat who is 4 years old.</code>ã€‚é€™çœ‹èµ·ä¾†å¥½å¤šäº†ã€‚</p>
<p>é †å¸¶ä¸€æï¼Œå¦‚æœä½ å¯¦ç¾äº† <code>Display</code>ï¼Œé‚£éº¼ä½ å°±å¯ä»¥å…è²»å¾—åˆ° <code>ToString</code> ç‰¹å¾µã€‚é€™æ˜¯å› ç‚ºä½ ä½¿ç”¨ <code>format!</code> å·¨é›†æ™‚é–“æ¥ä½¿ç”¨äº† <code>.fmt()</code> å‡½å¼ï¼Œå®ƒè®“ä½ å¯ä»¥ç”¨ <code>.to_string()</code> ä¾†åšå‡º <code>String</code>ã€‚æ‰€ä»¥æˆ‘å€‘å¯ä»¥åšé¡ä¼¼é€™å€‹ç¯„ä¾‹åšçš„äº‹æƒ…ï¼Œæˆ‘å€‘æŠŠ <code>reggie_mantle</code> å‚³çµ¦æƒ³è¦ <code>String</code> çš„å‡½å¼ï¼Œæˆ–è€…å…¶ä»–ä»»ä½•æ±è¥¿ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt;
struct Cat {
    name: String,
    age: u8,
}

impl fmt::Display for Cat {
    fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
        write!(f, &quot;{} is a cat who is {} years old.&quot;, self.name, self.age)
    }
}

fn print_cats(pet: String) {
    println!(&quot;{}&quot;, pet);
}

fn main() {
    let mr_mantle = Cat {
        name: &quot;Reggie Mantle&quot;.to_string(),
        age: 4,
    };

    print_cats(mr_mantle.to_string()); // é€™è£¡æŠŠç‰ è½‰æ›ç‚º String
    println!(&quot;Mr. Mantle's String is {} letters long.&quot;, mr_mantle.to_string().chars().count()); // æŠŠç‰ è½‰æ›æˆå­—å…ƒè¨ˆæ•¸
}</code></pre></pre>
<p>å°å‡ºï¼š</p>
<pre><code class="language-text">Reggie Mantle is a cat who is 4 years old.
Mr. Mantle's String is 42 letters long.
</code></pre>
<p>é—œæ–¼ç‰¹å¾µè¦è¨˜å¾—çš„æ˜¯ï¼Œå®ƒå€‘èˆ‡æŸäº›æ±è¥¿çš„è¡Œç‚ºæœ‰é—œã€‚ä½ çš„ <code>struct</code> æ˜¯å¦‚ä½•å‹•ä½œçš„ï¼Ÿå®ƒèƒ½åšä»€éº¼ï¼Ÿé€™å°±æ˜¯ç‰¹å¾µçš„ä½œç”¨ã€‚å¦‚æœä½ æƒ³æƒ³æˆ‘å€‘åˆ°ç›®å‰ç‚ºæ­¢æ‰€çœ‹åˆ°çš„ä¸€äº›ç‰¹å¾µï¼Œå®ƒå€‘å…¨éƒ½æ˜¯é—œæ–¼è¡Œç‚ºçš„ï¼š<code>Copy</code> æ˜¯å‹åˆ¥å¯ä»¥åšçš„äº‹æƒ…ã€‚<code>Display</code> ä¹Ÿæ˜¯å‹åˆ¥èƒ½åšçš„äº‹æƒ…ã€‚<code>ToString</code> æ˜¯å¦ä¸€å€‹ç‰¹å¾µï¼Œå®ƒä¹Ÿæ˜¯å‹åˆ¥å¯ä»¥åšçš„äº‹æƒ…ï¼šå®ƒå¯ä»¥æ”¹è®Šå‹åˆ¥æˆç‚º <code>String</code>ã€‚åœ¨æˆ‘å€‘çš„ <code>Dog</code> ç‰¹å¾µä¸­ï¼Œ<em>Dog</em> é€™å€‹è©ä¸¦ä¸æ„å‘³è‘—ä½ èƒ½åšçš„äº‹æƒ…ï¼Œä½†å®ƒçµ¦å‡ºäº†ä¸€äº›è®“å®ƒåšæŸäº›äº‹æƒ…çš„æ–¹æ³•ã€‚ä½ ä¹Ÿå¯ä»¥ç‚º <code>struct Poodle</code> æˆ– <code>struct Beagle</code> å¯¦ä½œå®ƒï¼Œå®ƒå€‘éƒ½æœƒå¾—åˆ° <code>Dog</code> çš„æ–¹æ³•ã€‚</p>
<p>è®“æˆ‘å€‘å†çœ‹å¦ä¸€å€‹æ›´ç´”ç²¹æ˜¯è¡Œç‚ºçš„ç¯„ä¾‹ã€‚æˆ‘å€‘å°‡æƒ³åƒä¸€å€‹æœ‰ä¸€äº›ç°¡å–®è§’è‰²çš„å¹»æƒ³éŠæˆ²ã€‚ä¸€å€‹æ˜¯ <code>Monster</code>ï¼Œå¦å¤–å…©å€‹æ˜¯<code>Wizard</code> å’Œ <code>Ranger</code>ã€‚<code>Monster</code> åªæ˜¯æœ‰ <code>health</code>ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥æ”»æ“Šå®ƒï¼Œå…¶ä»–å…©å€‹é‚„æ²’æœ‰ä»»ä½•æ±è¥¿ã€‚ä½†æ˜¯æˆ‘å€‘åšäº†å…©å€‹ç‰¹å¾µã€‚ä¸€å€‹å« <code>FightClose</code>ï¼Œè®“ä½ è¿‘èº«ä½œæˆ°ã€‚å¦ä¸€å€‹æ˜¯ <code>FightFromDistance</code>ï¼Œè®“ä½ åœ¨é è™•æˆ°é¬¥ã€‚åªæœ‰ <code>Ranger</code> å¯ä»¥ä½¿ç”¨ <code>FightFromDistance</code>ã€‚å®ƒæœƒåƒæ˜¯é€™è£¡çœ‹åˆ°çš„é€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust">struct Monster {
    health: i32,
}

struct Wizard {}
struct Ranger {}

trait FightClose {
    fn attack_with_sword(&amp;self, opponent: &amp;mut Monster) {
        opponent.health -= 10;
        println!(
            &quot;You attack with your sword. Your opponent now has {} health left.&quot;,
            opponent.health
        );
    }
    fn attack_with_hand(&amp;self, opponent: &amp;mut Monster) {
        opponent.health -= 2;
        println!(
            &quot;You attack with your hand. Your opponent now has {} health left.&quot;,
            opponent.health
        );
    }
}
impl FightClose for Wizard {}
impl FightClose for Ranger {}

trait FightFromDistance {
    fn attack_with_bow(&amp;self, opponent: &amp;mut Monster, distance: u32) {
        if distance &lt; 10 {
            opponent.health -= 10;
            println!(
                &quot;You attack with your bow. Your opponent now has {} health left.&quot;,
                opponent.health
            );
        }
    }
    fn attack_with_rock(&amp;self, opponent: &amp;mut Monster, distance: u32) {
        if distance &lt; 3 {
            opponent.health -= 4;
        }
        println!(
            &quot;You attack with your rock. Your opponent now has {} health left.&quot;,
            opponent.health
        );
    }
}
impl FightFromDistance for Ranger {}

fn main() {
    let radagast = Wizard {};
    let aragorn = Ranger {};

    let mut uruk_hai = Monster { health: 40 };

    radagast.attack_with_sword(&amp;mut uruk_hai);
    aragorn.attack_with_bow(&amp;mut uruk_hai, 8);
}</code></pre></pre>
<p>å°å‡ºï¼š</p>
<pre><code class="language-text">You attack with your sword. Your opponent now has 30 health left.
You attack with your bow. Your opponent now has 20 health left.
</code></pre>
<p>æˆ‘å€‘ç¸½æ˜¯åœ¨ç‰¹å¾µè£¡å‚³å…¥ <code>self</code>ï¼Œä½†æ˜¯æˆ‘å€‘ç¾åœ¨é‚„ä¸èƒ½ç”¨å®ƒåšä»€éº¼ã€‚é‚£æ˜¯å› ç‚º Rust ä¸çŸ¥é“ä»€éº¼å‹åˆ¥æœƒä½¿ç”¨å®ƒã€‚å®ƒå¯èƒ½æ˜¯ä¸€å€‹ <code>Wizard</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€å€‹ <code>Ranger</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€å€‹å«åš <code>Toefocfgetobjtnode</code> çš„æ–°çµæ§‹é«”ï¼Œæˆ–è€…å…¶ä»–ä»»ä½•æ±è¥¿ã€‚ç‚ºäº†è®“ <code>self</code> å…·æœ‰ä¸€å®šçš„åŠŸèƒ½ï¼Œæˆ‘å€‘å¯ä»¥åœ¨ç‰¹å¾µä¸­åŠ å…¥å¿…è¦çš„ç‰¹å¾µã€‚æ¯”å¦‚èªªï¼Œå¦‚æœæˆ‘å€‘æƒ³ç”¨ <code>{:?}</code> åˆ—å°ï¼Œé‚£éº¼æˆ‘å€‘å°±éœ€è¦ <code>Debug</code>ã€‚ä½ åªè¦æŠŠå®ƒå¯«åœ¨ <code>:</code>(å†’è™Ÿ)å¾Œé¢ï¼Œå°±å¯ä»¥æŠŠå®ƒåŠ å…¥åˆ°ç‰¹å¾µä¸­ã€‚ç¾åœ¨æˆ‘å€‘çš„ç¨‹å¼ç¢¼åƒé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust">struct Monster {
    health: i32,
}

#[derive(Debug)] // ç¾åœ¨ Wizard æœ‰ Debug
struct Wizard {
    health: i32, // ç¾åœ¨ Wizard æœ‰ health
}
#[derive(Debug)] // Ranger ä¹Ÿæ˜¯
struct Ranger {
    health: i32, // Ranger ä¹Ÿæ˜¯
}

trait FightClose: std::fmt::Debug { // ç¾åœ¨å‹åˆ¥éœ€è¦æœ‰ Debug ä¾†ä½¿ç”¨ FightClose
    fn attack_with_sword(&amp;self, opponent: &amp;mut Monster) {
        opponent.health -= 10;
        println!(
            &quot;You attack with your sword. Your opponent now has {} health left. You are now at: {:?}&quot;, // æˆ‘å€‘ç¾åœ¨å¯ä»¥ç”¨ {:?} å°å‡º self å› ç‚ºæˆ‘å€‘æœ‰ Debug
            opponent.health, &amp;self
        );
    }
    fn attack_with_hand(&amp;self, opponent: &amp;mut Monster) {
        opponent.health -= 2;
        println!(
            &quot;You attack with your hand. Your opponent now has {} health left.  You are now at: {:?}&quot;,
            opponent.health, &amp;self
        );
    }
}
impl FightClose for Wizard {}
impl FightClose for Ranger {}

trait FightFromDistance: std::fmt::Debug { // æˆ‘å€‘ä¹Ÿå¯ä»¥åŠ ä¸Šç‰¹å¾µ FightFromDistance : FightClose, å› ç‚º FightClose éœ€è¦ Debug
    fn attack_with_bow(&amp;self, opponent: &amp;mut Monster, distance: u32) {
        if distance &lt; 10 {
            opponent.health -= 10;
            println!(
                &quot;You attack with your bow. Your opponent now has {} health left.  You are now at: {:?}&quot;,
                opponent.health, self
            );
        }
    }
    fn attack_with_rock(&amp;self, opponent: &amp;mut Monster, distance: u32) {
        if distance &lt; 3 {
            opponent.health -= 4;
        }
        println!(
            &quot;You attack with your rock. Your opponent now has {} health left.  You are now at: {:?}&quot;,
            opponent.health, self
        );
    }
}
impl FightFromDistance for Ranger {}

fn main() {
    let radagast = Wizard { health: 60 };
    let aragorn = Ranger { health: 80 };

    let mut uruk_hai = Monster { health: 40 };

    radagast.attack_with_sword(&amp;mut uruk_hai);
    aragorn.attack_with_bow(&amp;mut uruk_hai, 8);
}</code></pre></pre>
<p>ç¾åœ¨å°å‡ºï¼š</p>
<pre><code class="language-text">You attack with your sword. Your opponent now has 30 health left. You are now at: Wizard { health: 60 }
You attack with your bow. Your opponent now has 20 health left.  You are now at: Ranger { health: 80 }
</code></pre>
<p>åœ¨çœŸå¯¦çš„éŠæˆ²ä¸­ï¼Œç‚ºæ¯å€‹å‹åˆ¥é‡å¯«å°å‡ºå…§å®¹å¯èƒ½æ¯”è¼ƒå¥½ï¼Œå› ç‚º <code>You are now at: Wizard { health: 60 }</code> çœ‹èµ·ä¾†æœ‰é»å¯ç¬‘ã€‚é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼ç‰¹å¾µè£¡é¢çš„æ–¹æ³•é€šå¸¸å¾ˆç°¡å–®ï¼Œå› ç‚ºä½ ä¸çŸ¥é“ä»€éº¼å‹åˆ¥æœƒä½¿ç”¨å®ƒã€‚ä¾‹å¦‚ï¼Œä½ ä¸èƒ½å¯«å‡º <code>self.0 += 10</code> é€™æ¨£çš„æ±è¥¿ã€‚ä½†æ˜¯é€™å€‹ç¯„ä¾‹è¡¨æ˜ï¼Œæˆ‘å€‘å¯ä»¥åœ¨æˆ‘å€‘æ­£åœ¨æ’°å¯«çš„ç‰¹å¾µè£¡é¢ä½¿ç”¨å…¶ä»–çš„ç‰¹å¾µã€‚ç•¶æˆ‘å€‘é€™æ¨£åšçš„æ™‚å€™ï¼Œæˆ‘å€‘æœƒå¾—åˆ°ä¸€äº›æˆ‘å€‘å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ã€‚</p>
<p>å¦å¤–ä¸€ç¨®ä½¿ç”¨ç‰¹å¾µçš„æ–¹å¼æ˜¯ä½¿ç”¨æ‰€è¬‚çš„ <code>ç‰¹å¾µç•Œé™ (trait bound)</code>ã€‚æ„æ€æ˜¯&quot;é€éç‰¹å¾µé€²è¡Œé™åˆ¶&quot;ã€‚ç‰¹å¾µé™åˆ¶å¾ˆç°¡å–®ï¼Œå› ç‚ºç‰¹å¾µå¯¦éš›ä¸Šä¸éœ€è¦ä»»ä½•æ–¹æ³•ï¼Œæˆ–è€…èªªæ ¹æœ¬ä¸éœ€è¦ä»»ä½•æ±è¥¿ã€‚è®“æˆ‘å€‘ç”¨é¡ä¼¼ä½†ä¸åŒçš„æ±è¥¿é‡å¯«æˆ‘å€‘çš„ç¨‹å¼ç¢¼ã€‚é€™æ¬¡æˆ‘å€‘çš„ç‰¹å¾µæ²’æœ‰ä»»ä½•æ–¹æ³•ï¼Œä½†æˆ‘å€‘æœ‰é™å®šè¦ä½¿ç”¨çš„ç‰¹å¾µçš„å…¶å®ƒå‡½å¼ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Debug;  // æ‰€ä»¥æˆ‘å€‘ç¾åœ¨ä¸ç”¨å†æ¯æ¬¡å¯« std::fmt::Debug

struct Monster {
    health: i32,
}

#[derive(Debug)]
struct Wizard {
    health: i32,
}
#[derive(Debug)]
struct Ranger {
    health: i32,
}

trait Magic{} // é€™äº›ç‰¹å¾µéƒ½æ²’æœ‰æ–¹æ³•ï¼Œå®ƒå€‘åªæ˜¯ç‰¹å¾µç•Œé™
trait FightClose {}
trait FightFromDistance {}

impl FightClose for Ranger{} // æ¯å€‹å‹åˆ¥éƒ½å¾—åˆ° FightClose,
impl FightClose for Wizard {}
impl FightFromDistance for Ranger{} // ä½†åªæœ‰ Ranger å¾—åˆ° FightFromDistance
impl Magic for Wizard{}  // ä¸”åªæœ‰ Wizard å¾—åˆ° Magic

fn attack_with_bow&lt;T: FightFromDistance + Debug&gt;(character: &amp;T, opponent: &amp;mut Monster, distance: u32) {
    if distance &lt; 10 {
        opponent.health -= 10;
        println!(
            &quot;You attack with your bow. Your opponent now has {} health left.  You are now at: {:?}&quot;,
            opponent.health, character
        );
    }
}

fn attack_with_sword&lt;T: FightClose + Debug&gt;(character: &amp;T, opponent: &amp;mut Monster) {
    opponent.health -= 10;
    println!(
        &quot;You attack with your sword. Your opponent now has {} health left. You are now at: {:?}&quot;,
        opponent.health, character
    );
}

fn fireball&lt;T: Magic + Debug&gt;(character: &amp;T, opponent: &amp;mut Monster, distance: u32) {
    if distance &lt; 15 {
        opponent.health -= 20;
        println!(&quot;You raise your hands and cast a fireball! Your opponent now has {} health left. You are now at: {:?}&quot;,
    opponent.health, character);
    }
}

fn main() {
    let radagast = Wizard { health: 60 };
    let aragorn = Ranger { health: 80 };

    let mut uruk_hai = Monster { health: 40 };

    attack_with_sword(&amp;radagast, &amp;mut uruk_hai);
    attack_with_bow(&amp;aragorn, &amp;mut uruk_hai, 8);
    fireball(&amp;radagast, &amp;mut uruk_hai, 8);
}</code></pre></pre>
<p>å°å‡ºä¾†çš„æ±è¥¿å¹¾ä¹ä¸€æ¨£ï¼š</p>
<pre><code class="language-text">You attack with your sword. Your opponent now has 30 health left. You are now at: Wizard { health: 60 }
You attack with your bow. Your opponent now has 20 health left.  You are now at: Ranger { health: 80 }
You raise your hands and cast a fireball! Your opponent now has 0 health left. You are now at: Wizard { health: 60 }
</code></pre>
<p>æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ï¼Œç•¶ä½ ä½¿ç”¨ç‰¹å¾µæ™‚ï¼Œæœ‰å¾ˆå¤šæ–¹å¼å¯ä»¥åšåˆ°åŒæ¨£çš„äº‹æƒ…ã€‚é€™ä¸€åˆ‡éƒ½å–æ±ºæ–¼ä»€éº¼å°ä½ æ­£åœ¨ç·¨å¯«çš„ç¨‹å¼æœ€æœ‰æ„ç¾©ã€‚</p>
<p>ç¾åœ¨è®“æˆ‘å€‘ä¾†çœ‹çœ‹å¦‚ä½•å¯¦ä½œä¸€äº›ä½ æœƒåœ¨ Rust ä¸­ä½¿ç”¨çš„ä¸»è¦ç‰¹å¾µã€‚</p>
<h3 id="from-ç‰¹å¾µ"><a class="header" href="#from-ç‰¹å¾µ">From ç‰¹å¾µ</a></h3>
<p><em>From</em> æ˜¯å€‹éå¸¸æ–¹ä¾¿ä½¿ç”¨çš„ç‰¹å¾µï¼Œä½ çŸ¥é“é€™ä¸€é»æ˜¯å› ç‚ºä½ å·²ç¶“çœ‹éå¾ˆå¤šéã€‚æœ‰äº† <em>From</em> ä½ å¯ä»¥å¾ <code>&amp;str</code> åšå‡º <code>String</code>ï¼Œä½†ä½ ä¹Ÿå¯ä»¥ç”¨è¨±å¤šå…¶ä»–å‹åˆ¥åšå‡ºè¨±å¤šç¨®å‹åˆ¥ã€‚ä¾‹å¦‚ï¼ŒVec èƒ½ç”¨ <em>From</em> åœ¨ä»¥ä¸‹å‹åˆ¥ï¼š</p>
<pre><code class="language-text">From&lt;&amp;'_ [T]&gt;
From&lt;&amp;'_ mut [T]&gt;
From&lt;&amp;'_ str&gt;
From&lt;&amp;'a Vec&lt;T&gt;&gt;
From&lt;[T; N]&gt;
From&lt;BinaryHeap&lt;T&gt;&gt;
From&lt;Box&lt;[T]&gt;&gt;
From&lt;CString&gt;
From&lt;Cow&lt;'a, [T]&gt;&gt;
From&lt;String&gt;
From&lt;Vec&lt;NonZeroU8&gt;&gt;
From&lt;Vec&lt;T&gt;&gt;
From&lt;VecDeque&lt;T&gt;&gt;
</code></pre>
<p>é‚£è£¡é‚„æœ‰å¾ˆå¤šç¨® <code>Vec::from()</code> æˆ‘å€‘é‚„æ²’æœ‰å˜—è©¦ç”¨éã€‚æˆ‘å€‘ä¾†ç”¨å¹¾å€‹çœ‹çœ‹æœƒæ€éº¼æ¨£ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Display; // æˆ‘å€‘æœƒåšå€‹ç”¨ä¾†å°å‡ºå®ƒå€‘çš„æ³›å‹å‡½å¼ï¼Œæ‰€ä»¥æˆ‘å€‘æƒ³è¦ Display

fn print_vec&lt;T: Display&gt;(input: &amp;Vec&lt;T&gt;) { // æ¥å— Vec&lt;T&gt; å¦‚æœå‹åˆ¥ T æœ‰ Display
    for item in input {
        print!(&quot;{} &quot;, item);
    }
    println!();
}

fn main() {

    let array_vec = Vec::from([8, 9, 10]); // è©¦è‘—å°é™£åˆ— from
    print_vec(&amp;array_vec);

    let str_vec = Vec::from(&quot;What kind of vec will I be?&quot;); // å° &amp;str from çš„é™£åˆ—ï¼Ÿ é€™æœƒè »æœ‰è¶£çš„
    print_vec(&amp;str_vec);

    let string_vec = Vec::from(&quot;What kind of vec will a String be?&quot;.to_string()); // ä¹Ÿæ˜¯å° String å» from
    print_vec(&amp;string_vec);
}</code></pre></pre>
<p>å°å‡ºçš„å…§å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-text">8 9 10
87 104 97 116 32 107 105 110 100 32 111 102 32 118 101 99 32 119 105 108 108 32 73 32 98 101 63
87 104 97 116 32 107 105 110 100 32 111 102 32 118 101 99 32 119 105 108 108 32 97 32 83 116 114 105 110 103 32 98 101 63
</code></pre>
<p>å¦‚æœä½ è§€å¯Ÿå‹åˆ¥ï¼Œç¬¬äºŒå€‹å’Œç¬¬ä¸‰å€‹å‘é‡éƒ½æ˜¯ <code>Vec&lt;u8&gt;</code>ï¼Œä¹Ÿå°±æ˜¯ <code>&amp;str</code> å’Œ <code>String</code> çš„ä½å…ƒçµ„ã€‚æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ° <code>From</code> æ˜¯éå¸¸éˆæ´»çš„ï¼Œä¸”ç”¨å¾—å¾ˆå¤šã€‚è®“æˆ‘å€‘ç”¨è‡ªå·±çš„å‹åˆ¥ä¾†è©¦è©¦çœ‹ã€‚</p>
<p>æˆ‘å€‘å°‡åšå…©å€‹çµæ§‹é«”ï¼Œç„¶å¾Œç‚ºå…¶ä¸­ä¸€å€‹çµæ§‹é«”å¯¦ä½œ <code>From</code>ã€‚ä¸€å€‹çµæ§‹é«”æœƒæ˜¯ <code>City</code>ï¼Œå¦ä¸€å€‹çµæ§‹é«”å‰‡æœƒæ˜¯ <code>Country</code>ã€‚æˆ‘å€‘å¸Œæœ›èƒ½å¤ åšåˆ°é€™ä»¶äº‹ï¼š<code>let country_name = Country::from(vector_of_cities)</code>ã€‚</p>
<p>å®ƒçœ‹èµ·ä¾†åƒé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)] // é€™æ¨£æˆ‘å€‘å¯ä»¥å°å‡º City
struct City {
    name: String,
    population: u32,
}

impl City {
    fn new(name: &amp;str, population: u32) -&gt; Self { // åªæ˜¯æ–°çš„å‡½å¼
        Self {
            name: name.to_string(),
            population,
        }
    }
}
#[derive(Debug)] // Country ä¹Ÿè¦å¯ä»¥è¢«å°å‡º
struct Country {
    cities: Vec&lt;City&gt;, // æˆ‘å€‘çš„åŸå¸‚éƒ½åœ¨é€™è£¡
}

impl From&lt;Vec&lt;City&gt;&gt; for Country { // æ³¨æ„: æˆ‘å€‘ä¸ç”¨å»å¯« From&lt;City&gt;, æˆ‘å€‘ä¹Ÿå¯ä»¥æ”¹ç”¨
                                   // From&lt;Vec&lt;City&gt;&gt;. å› æ­¤æˆ‘å€‘ä¹Ÿèƒ½å¯¦ä½œåœ¨æˆ‘å€‘
                                   // æœªæ›¾å»ºç«‹çš„å‹åˆ¥ä¸Š
    fn from(cities: Vec&lt;City&gt;) -&gt; Self {
        Self { cities }
    }
}

impl Country {
    fn print_cities(&amp;self) { // å‡½å¼å°å‡º Country å…§çš„åŸå¸‚
        for city in &amp;self.cities {
            // ç”¨ &amp; å› ç‚º Vec&lt;City&gt; ä¸æ˜¯ Copy
            println!(&quot;{:?} has a population of {:?}.&quot;, city.name, city.population);
        }
    }
}

fn main() {
    let helsinki = City::new(&quot;Helsinki&quot;, 631_695);
    let turku = City::new(&quot;Turku&quot;, 186_756);

    let finland_cities = vec![helsinki, turku]; // é€™æ˜¯ Vec&lt;City&gt;
    let finland = Country::from(finland_cities); // æ‰€ä»¥ç¾åœ¨æˆ‘å€‘èƒ½ç”¨ From

    finland.print_cities();
}</code></pre></pre>
<p>å°å‡ºï¼š</p>
<pre><code class="language-text">&quot;Helsinki&quot; has a population of 631695.
&quot;Turku&quot; has a population of 186756.
</code></pre>
<p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œå¾ˆå®¹æ˜“å¾ä½ æ²’æœ‰å»ºç«‹çš„å‹åˆ¥ä¸­å¯¦ä½œå‡º <code>From</code>ï¼Œæ¯”å¦‚ <code>Vec</code>ã€<code>i32</code> ç­‰ç­‰ã€‚é€™è£¡é‚„æœ‰ä¸€å€‹ä¾‹å­æ˜¯ï¼Œæˆ‘å€‘å»ºç«‹æœ‰å…©å€‹å‘é‡çš„å‘é‡ã€‚ç¬¬ä¸€å€‹å‘é‡å­˜æ”¾å¶æ•¸ï¼Œç¬¬äºŒå€‹å‘é‡å­˜æ”¾å¥‡æ•¸ã€‚ä½ å¯ä»¥ç”¨ <code>From</code> çµ¦å®ƒä¸€å€‹ <code>i32</code> çš„å‘é‡ï¼Œå®ƒæœƒæŠŠå®ƒè®Šæˆ <code>Vec&lt;Vec&lt;i32&gt;&gt;</code>ï¼šä¸€å€‹å‘é‡è£¡é¢æœ‰è¨±å¤šå®¹ç´ <code>i32</code> çš„å‘é‡ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::convert::From;

struct EvenOddVec(Vec&lt;Vec&lt;i32&gt;&gt;);

impl From&lt;Vec&lt;i32&gt;&gt; for EvenOddVec {
    fn from(input: Vec&lt;i32&gt;) -&gt; Self {
        let mut even_odd_vec: Vec&lt;Vec&lt;i32&gt;&gt; = vec![vec![], vec![]]; // å‘é‡çš„è£¡é¢æœ‰å…©å€‹ç©ºå‘é‡
                                                                    // é€™æ˜¯å›å‚³å€¼ä½†é¦–å…ˆæˆ‘å€‘å¿…é ˆå…ˆå°‡å®ƒå¡«å……
        for item in input {
            if item % 2 == 0 {
                even_odd_vec[0].push(item);
            } else {
                even_odd_vec[1].push(item);
            }
        }
        Self(even_odd_vec) // ç¾åœ¨å®ƒå®Œæˆäº†é‚£æˆ‘å€‘æŠŠå®ƒå›å‚³ç‚º Self (Self = EvenOddVec)
    }
}

fn main() {
    let bunch_of_numbers = vec![8, 7, -1, 3, 222, 9787, -47, 77, 0, 55, 7, 8];
    let new_vec = EvenOddVec::from(bunch_of_numbers);

    println!(&quot;Even numbers: {:?}\nOdd numbers: {:?}&quot;, new_vec.0[0], new_vec.0[1]);
}</code></pre></pre>
<p>å°å‡ºï¼š</p>
<pre><code class="language-text">Even numbers: [8, 222, 0, 8]
Odd numbers: [7, -1, 3, 9787, -47, 77, 55, 7]
</code></pre>
<p>åƒ <code>EvenOddVec</code> é€™æ¨£çš„å‹åˆ¥å¯èƒ½æœ€å¥½æ˜¯ç”¨æ³›å‹çš„ <code>T</code>ï¼Œé€™æ¨£æˆ‘å€‘å°±å¯ä»¥ç”¨åœ¨è¨±å¤šæ•¸å€¼å‹åˆ¥ã€‚å¦‚æœä½ æƒ³ç·´ç¿’çš„è©±ï¼Œä½ å¯ä»¥è©¦è‘—æŠŠé€™å€‹ç¯„ä¾‹åšæˆæ³›å‹çš„ã€‚</p>
<h3 id="æ¥å—-string-å’Œ-str-çš„å‡½å¼"><a class="header" href="#æ¥å—-string-å’Œ-str-çš„å‡½å¼">æ¥å— String å’Œ &amp;str çš„å‡½å¼</a></h3>
<p>æœ‰æ™‚ä½ æƒ³è®“å‡½å¼èƒ½åŒæ™‚æ¥å— <code>String</code> å’Œ <code>&amp;str</code>ã€‚ä½ å¯ä»¥é€éæ³›å‹å’Œ <code>AsRef</code> ç‰¹å¾µä¾†åšåˆ°é€™ä»¶äº‹ã€‚<code>AsRef</code> ç”¨æ–¼å¾æŸå€‹å‹åˆ¥å‘å¦ä¸€å€‹å‹åˆ¥æä¾›åƒè€ƒã€‚å¦‚æœä½ æŸ¥é–± <code>String</code> æ–‡ä»¶ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒå°è¨±å¤šå‹åˆ¥éƒ½æœ‰æä¾› <code>AsRef</code>ï¼š</p>
<p><a href="https://doc.rust-lang.org/std/string/struct.String.html">https://doc.rust-lang.org/std/string/struct.String.html</a></p>
<p>é€™äº›æ˜¯å®ƒå€‘çš„ä¸€äº›å‡½å¼ç°½åã€‚</p>
<p><code>AsRef&lt;str&gt;</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
impl AsRef&lt;str&gt; for String

fn as_ref(&amp;self) -&gt; &amp;str
<span class="boring">}</span></code></pre></pre>
<p><code>AsRef&lt;[u8]&gt;</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
impl AsRef&lt;[u8]&gt; for String

fn as_ref(&amp;self) -&gt; &amp;[u8]
<span class="boring">}</span></code></pre></pre>
<p><code>AsRef&lt;OsStr&gt;</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
impl AsRef&lt;OsStr&gt; for String

fn as_ref(&amp;self) -&gt; &amp;OsStr
<span class="boring">}</span></code></pre></pre>
<p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ¥å— <code>&amp;self</code>ï¼Œä¸¦çµ¦å‡ºå¦ä¸€å€‹å‹åˆ¥çš„åƒè€ƒã€‚é€™æ„å‘³è‘—ï¼Œå¦‚æœä½ æœ‰å€‹æ³›å‹å‹åˆ¥ Tï¼Œä½ å¯ä»¥èªªå®ƒéœ€è¦ <code>AsRef&lt;str&gt;</code>ã€‚å¦‚æœä½ é€™æ¨£åšï¼Œå®ƒå°‡æœƒèƒ½å¤ æ¥å— <code>&amp;str</code> å’Œ <code>String</code>ã€‚</p>
<p>è®“æˆ‘å€‘å…ˆå¾æ³›å‹å‡½å¼èªªèµ·ã€‚é€™å€‹é‚„ä¸èƒ½åŸ·è¡Œï¼š</p>
<pre><pre class="playground"><code class="language-rust">fn print_it&lt;T&gt;(input: T) {
    println!(&quot;{}&quot;, input) // âš ï¸
}

fn main() {
    print_it(&quot;Please print me&quot;);
}</code></pre></pre>
<p>Rustèªª <code>error[E0277]: T doesn't implement std::fmt::Display</code>ã€‚æ‰€ä»¥æˆ‘å€‘æœƒè¢«è¦æ±‚çµ¦ T å¯¦ä½œ Displayã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Display;

fn print_it&lt;T: Display&gt;(input: T) {
    println!(&quot;{}&quot;, input)
}

fn main() {
    print_it(&quot;Please print me&quot;);
}</code></pre></pre>
<p>ç¾åœ¨å¯ä»¥åŸ·è¡Œä¸¦å°å‡º <code>Please print me</code>ã€‚é€™ä¸éŒ¯ï¼Œä½† T ä»ç„¶å¯ä»¥æ˜¯å¤ªå¤šç¨®é¡çš„å‹åˆ¥ã€‚å®ƒå¯ä»¥æ˜¯ <code>i8</code>ã€<code>f32</code> åŠä»»ä½•å…¶å®ƒæœ‰ <code>Display</code> çš„æ±è¥¿ã€‚æ‰€ä»¥æˆ‘å€‘åŠ ä¸Š <code>AsRef&lt;str&gt;</code>ï¼Œé‚£éº¼ç¾åœ¨ T éœ€è¦åŒæ™‚æœ‰å¯¦ä½œ <code>AsRef&lt;str&gt;</code> å’Œ <code>Display</code>ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Display;

fn print_it&lt;T: AsRef&lt;str&gt; + Display&gt;(input: T) {
    println!(&quot;{}&quot;, input)
}

fn main() {
    print_it(&quot;Please print me&quot;);
    print_it(&quot;Also, please print me&quot;.to_string());
    // print_it(7); &lt;- é€™ä¸æœƒå°å‡ºä¾†
}</code></pre></pre>
<p>ç¾åœ¨å®ƒä¸æœƒæ¥å—åƒ <code>i8</code> é€™æ¨£çš„å‹åˆ¥ã€‚</p>
<p>ä¸è¦å¿˜äº†ï¼Œä½ å¯ä»¥åœ¨å‡½å¼è®Šé•·æ™‚ç”¨ <code>where</code> ä»¥ä¸ä¸€æ¨£çš„æ–¹å¼å¯«å‡ºå‡½å¼ã€‚å¦‚æœæˆ‘å€‘åŠ ä¸Š Debugï¼Œé‚£éº¼å®ƒå°±æœƒè®Šæˆä¸€æ•´è¡Œé•·é•·çš„ <code>fn print_it&lt;T: AsRef&lt;str&gt; + Display + Debug&gt;(input: T)</code>ã€‚å› æ­¤æˆ‘å€‘å¯ä»¥å¯«æˆé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::{Debug, Display}; // åŠ ä¸Š Debug

fn print_it&lt;T&gt;(input: T) // ç¾åœ¨é€™è¡Œå¥½è®€å¤šäº†
where
    T: AsRef&lt;str&gt; + Debug + Display, // ä¸¦ä¸”é€™äº›ç‰¹å¾µä¹Ÿå¥½è®€
{
    println!(&quot;{}&quot;, input)
}

fn main() {
    print_it(&quot;Please print me&quot;);
    print_it(&quot;Also, please print me&quot;.to_string());
}</code></pre></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Chapter_33.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="Chapter_35.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Chapter_33.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="Chapter_35.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
